webpackJsonp([18],{UhdE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("woOf"),l=a.n(o),i={data:function(){return{editVisible:!1,page:{curPage:1,curPageSize:10,totalSize:1,result:[]},searchForm:{odName:""},dialogTitle:"添加",dialogForm:{odName:"",messageContent:"",url:"",dataStatus:""},dialogFormRules:{odName:[{required:!0,message:"请选择O单名称",trigger:"change"}],messageContent:[{required:!0,message:"请输入消息内容",trigger:"blur"}],dataStatus:[{required:!0,message:"请选择数据状态",trigger:"change"}]},selectedRow:"",odList:[]}},computed:{disabled:function(){return"查看"===this.dialogTitle}},created:function(){var e=this;this.$nextTick(function(){e.initPageData(),e.queryOdList()})},methods:{queryOdList:function(){var e=this;this.$http.post({url:"/wfbs-console/comm/selectOdSigns",data:{}}).then(function(t){console.log(t),e.odList=t.data.result}).catch(function(e){console.log(e)})},formatterStatus:function(e,t){return"1"===e.dataStatus?"有效":"0"===e.dataStatus?"无效":"未知状态"},resetForm:function(){this.$refs.searchForm.resetFields()},search:function(){this.page.curPage=1,this.initPageData()},showDialog:function(e){0===e?(this.dialogTitle="添加",this.editVisible=!0):(this.dialogTitle=1===e?"查看":"修改",""!==this.selectedRow?(this.dialogForm=l()({},this.selectedRow),this.editVisible=!0):this.$alert("请选择一条记录","提示",{confirmButtonText:"确定"}))},initPageData:function(){this.$http.initPageData("/wfbs-console/dynamicMessage/selectDynamicMessages/",this)},rowClick:function(e,t){this.selectedRow=e},rowDblclick:function(e,t){this.selectedRow=e,this.showAddDialog(1)},handleSizeChange:function(e){this.page.curPageSize=e,this.initPageData()},handleCurrentChange:function(e){this.page.curPage=e,this.initPageData()},closeDialog:function(){this.$refs.dialogForm.resetFields()},submitForm:function(e){var t=this,a="添加"===this.dialogTitle?"":this.dialogForm.id;this.$refs[e].validate(function(e){if(!e)return!1;t.$http.post({url:"/wfbs-console/dynamicMessage/addOrUpdateDynamicMessage",data:{odName:t.dialogForm.odName,messageContent:t.dialogForm.messageContent,url:t.dialogForm.url,dataStatus:t.dialogForm.dataStatus,id:a}}).then(function(e){console.log(e),t.$message({type:"success",message:"操作成功!"}),t.editVisible=!1}).catch(function(e){console.log(e)})})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"my-content-wrap menu-wrap"},[a("div",{staticClass:"handle-box"},[a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"O单名称：",prop:"odName"}},[a("el-select",{attrs:{placeholder:"请选择O单名称"},model:{value:e.searchForm.odName,callback:function(t){e.$set(e.searchForm,"odName",t)},expression:"searchForm.odName"}},e._l(e.odList,function(e){return a("el-option",{key:e.odName,attrs:{label:e.odName,value:e.odName}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.search()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){e.resetForm()}}},[e._v("清空")])],1)],1)],1),e._v(" "),a("div",{staticClass:"operate-box"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.showDialog(0)}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(t){e.showDialog(1)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.showDialog(2)}}},[e._v("修改")])],1),e._v(" "),a("div",{staticClass:"my-content-box"},[a("baseTable",{attrs:{page:e.page,handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange},on:{"row-dblclick":e.rowDblclick,"row-click":e.rowClick}},[a("template",{slot:"content"},[a("el-table-column",{attrs:{prop:"odName",label:"O单名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"messageContent",label:"消息内容",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"链接地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataStatus",formatter:e.formatterStatus,label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUserName",label:"创建人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateUserName",label:"修改人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",align:"center"}})],1)],2)],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.dialogTitle,visible:e.editVisible,width:"50%"},on:{close:e.closeDialog,"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,inline:!0,disabled:e.disabled,"label-width":"120px",rules:e.dialogFormRules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"O单标识：",prop:"odName"}},[a("el-select",{attrs:{placeholder:"请选择O单名称"},model:{value:e.dialogForm.odName,callback:function(t){e.$set(e.dialogForm,"odName",t)},expression:"dialogForm.odName"}},[a("el-option",{attrs:{label:"tgb",value:"tgb"}}),e._v(" "),a("el-option",{attrs:{label:"jsd",value:"jsd"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"消息内容：",prop:"ORG_NAME"}},[a("el-input",{model:{value:e.dialogForm.ORG_NAME,callback:function(t){e.$set(e.dialogForm,"ORG_NAME",t)},expression:"dialogForm.ORG_NAME"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据状态：",prop:"dataStatus"}},[a("el-select",{attrs:{placeholder:"请选择数据状态"},model:{value:e.dialogForm.dataStatus,callback:function(t){e.$set(e.dialogForm,"dataStatus",t)},expression:"dialogForm.dataStatus"}},[a("el-option",{attrs:{label:"有效",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"无效",value:"0"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"链接地址：",prop:"url"}},[a("el-input",{model:{value:e.dialogForm.url,callback:function(t){e.$set(e.dialogForm,"url",t)},expression:"dialogForm.url"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("dialogForm")}}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(i,s,!1,function(e){a("asOv")},"data-v-197688cd",null);t.default=r.exports},asOv:function(e,t){}});